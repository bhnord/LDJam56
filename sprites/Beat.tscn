[gd_scene load_steps=3 format=3 uid="uid://b0cqwrcnsb7vb"]

[ext_resource type="Texture2D" uid="uid://cj5wy5d5q8rli" path="res://sprites/beat-01.png" id="1_fpmvt"]

[sub_resource type="GDScript" id="GDScript_3ua11"]
script/source = "extends Node2D

signal beat_finished

var speed = 200
var target_position
var disappear_time = .1

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	#TODO This prolly shouldnt be hard coded like this
	add_to_group(\"beats\")
	target_position = Vector2(get_viewport_rect().size[0]/2, get_viewport_rect().size[1] - 50)

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	var direction = (target_position - position).normalized();
	var old_pos = position
	position += direction * speed * delta;
	if position.distance_to(target_position) < 5:
		$DisappearTimer.start(disappear_time)
		set_process(false)
		
func _on_disappear_timer_timeout():
	emit_signal(\"beat_finished\")
	queue_free()
"

[node name="Beat" type="Node2D"]
script = SubResource("GDScript_3ua11")

[node name="Beat-01" type="Sprite2D" parent="."]
scale = Vector2(0.5, 0.5)
texture = ExtResource("1_fpmvt")

[node name="DisappearTimer" type="Timer" parent="."]
one_shot = true

[connection signal="timeout" from="DisappearTimer" to="." method="_on_disappear_timer_timeout"]
